using Microsoft.AspNetCore.Mvc;
using VulnerabilityScanner.Models;
using VulnerabilityScanner.Service.Mappers;
using VulnerabilityScanner.Service.Models.Requests;

namespace VulnerabilityScanner.Service.Controllers;

[ApiController]
[ApiVersion("1")]
[Route("api/v{version:apiVersion}/scan")]
public class ScanController : ControllerBase
{
    private readonly IMapper<ScanRequest, Project> _projectMapper;

    public ScanController(IMapper<ScanRequest, Project> projectMapper)
    {
        _projectMapper = projectMapper;
    }

    [HttpPost]
    public async Task<IActionResult> PostAsync([FromBody] ScanRequest scanRequest, CancellationToken cancellationToken)
    {
        var project = _projectMapper.Map(scanRequest);
        
        return Ok();
    }
}