# How to run & test this code:

First you have to build docker image with following command in terminal:
```bash
docker build -f ./VulnerabilityScanner.Service/Dockerfile -t vulnerability-scanner  .
```
After build succeed you can run image by executing following command:
```bash
docker run -p 80:80 -p 443:443 -e GITHUB-ACCESS-TOKEN={your_access_token} -e GRAPH-REST-URI=https://api.github.com/graphql vulnerability-scanner
```
If you don't want to build docker image on your own PC, you can run image built by CI
```bash
docker run -p 80:80 -p 443:443 -e GITHUB-ACCESS-TOKEN={your_access_token} -e GRAPH-REST-URI=https://api.github.com/graphql sdok/vulnerability-scanner:latest
```
Once you executed commands above you can test it via requests:

Examples of requests:
```bash
curl --location --request POST 'http://localhost:80/api/v1/scan' \
--header 'Content-Type: application/json' \
--data-raw '{
   "ecosystem": "npm",
   "fileContent":
"ewogIm5hbWUiOiAiTXkgQXBwbGljYXRpb24iLAogInZlcnNpb24iOiAiMS4wLjAiLAogImRlcGVuZGVuY2llcyI6IHsKICAgImRlZXAtb3ZlcnJpZGUiOiAiMS4wLjEiLAogICAiZXhwcmVzcyI6ICI0LjQuMCIKIH0KfQ=="
}'
```
```bash
curl --location --request POST 'http://localhost:80/api/v1/scan' \
--header 'Content-Type: application/json' \
--data-raw '{
   "ecosystem": "npm",
   "fileContent":
"ewogICJuYW1lIjogIk15IEFwcGxpY2F0aW9uIiwKICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgImRlcGVuZGVuY2llcyI6IHsKICAgICJkZWVwLW92ZXJyaWRlIjogIjEuMC4xIiwKICAgICJleHByZXNzIjogIjQuMTcuMSIKICB9Cn0="
}'
```

### Notes

Test have been written only for functionality that really has logic to test. I found it unnecessary to write unit tests that verify right executing order and calls delegating (in scope of test task).
